基于你提供的 `app_id = 'apppj8hsmxv7622'` 和 `resource_id = 'l_68a438dce4b0694c5b1aeac9'`，我来给出对应的 Redis 查看命令：

## Redis 查看命令

### 1. 任务ID构造
```bash
# taskID = appId:resourceId
taskID="apppj8hsmxv7622:l_68a438dce4b0694c5b1aeac9"
```

### 2. 查看 ZSet 队列
```bash
# 查看队列中的所有任务（带分数）
ZRANGE audio:unbind:delay:queue{gray} 0 -1 WITHSCORES

# 查看特定任务是否在队列中
ZSCORE audio:unbind:delay:queue{gray} "apppj8hsmxv7622:l_68a438dce4b0694c5b1aeac9"

# 查看队列中到期的任务（假设当前时间戳）
ZRANGEBYSCORE audio:unbind:delay:queue{gray} -inf 1737540638 WITHSCORES

# 查看队列总数
ZCARD audio:unbind:delay:queue{gray}
```

### 3. 查看集中元数据 Hash
```bash
# 查看该任务的所有元数据
HMGET audio:unbind:meta{gray} \
  "c:apppj8hsmxv7622:l_68a438dce4b0694c5b1aeac9" \
  "r:apppj8hsmxv7622:l_68a438dce4b0694c5b1aeac9" \
  "s:apppj8hsmxv7622:l_68a438dce4b0694c5b1aeac9"

# 分别查看各字段
HGET audio:unbind:meta{gray} "c:apppj8hsmxv7622:l_68a438dce4b0694c5b1aeac9"  # 创建时间
HGET audio:unbind:meta{gray} "r:apppj8hsmxv7622:l_68a438dce4b0694c5b1aeac9"  # 重试次数
HGET audio:unbind:meta{gray} "s:apppj8hsmxv7622:l_68a438dce4b0694c5b1aeac9"  # 任务状态

# 查看整个元数据 Hash 的所有字段
HGETALL audio:unbind:meta{gray}

# 查看元数据 Hash 中字段总数
HLEN audio:unbind:meta{gray}
```

### 4. 实际 Redis CLI 命令示例
```bash
# 连接 Redis
redis-cli -h 127.0.0.1 -p 6379

# 查看任务是否存在于队列
ZSCORE audio:unbind:delay:queue{gray} "apppj8hsmxv7622:l_68a438dce4b0694c5b1aeac9"

# 查看任务元数据
HMGET audio:unbind:meta{gray} "c:apppj8hsmxv7622:l_68a438dce4b0694c5b1aeac9" "r:apppj8hsmxv7622:l_68a438dce4b0694c5b1aeac9" "s:apppj8hsmxv7622:l_68a438dce4b0694c5b1aeac9"
```

### 5. 状态值解释
- **c:{taskID}**: 创建时间戳（Unix timestamp）
- **r:{taskID}**: 重试次数（0, 1, 2, ...）
- **s:{taskID}**: 任务状态
  - `0` = 等待中（Pending）
  - `1` = 处理中（Processing）  
  - `2` = 完成（Completed）
  - `3` = 失败（Failed）

### 6. 调试用的完整查看脚本
```bash
#!/bin/bash
TASK_ID="apppj8hsmxv7622:l_68a438dce4b0694c5b1aeac9"
QUEUE_KEY="audio:unbind:delay:queue{gray}"
META_KEY="audio:unbind:meta{gray}"

echo "=== ZSet 队列信息 ==="
redis-cli ZSCORE $QUEUE_KEY "$TASK_ID"
redis-cli ZCARD $QUEUE_KEY

echo "=== Hash 元数据信息 ==="
redis-cli HMGET $META_KEY "c:$TASK_ID" "r:$TASK_ID" "s:$TASK_ID"

echo "=== 当前时间戳（用于对比） ==="
date +%s
```

**注意**：实际的 hash tag 可能根据你的灰度环境而不同（如 `{all}`, `{our}` 等），请根据你的 `GRAY_LEVEL` 环境变量调整键名中的 tag 部分。





# 生产环境 - our 灰度

./risk_safe_server run -c .env.production -s start_auto_unbind_worker -g our

  

# 灰度环境 - gray 灰度

./risk_safe_server run -c .env.staging -s start_auto_unbind_worker -g gray

  

# 全量环境 - all 灰度

./risk_safe_server run -c .env.production -s start_auto_unbind_worker -g all


./risk_safe_server run -c .env.production -s start_auto_unbind_worker -g our